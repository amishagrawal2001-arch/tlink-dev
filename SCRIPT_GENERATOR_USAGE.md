# Script Generator Feature - Usage Guide

The Script Generator feature automatically detects and extracts scripts from AI chat responses, making it easy to work with shell scripts, Python scripts, and other code generated by the AI.

## How It Works

### Automatic Detection

When you ask the AI to generate a script, the Script Generator automatically:

1. **Detects script-like content** in AI responses by looking for:
   - Code blocks with language tags (```bash, ```sh, ```python, etc.)
   - Shebang lines (#!/bin/bash, #!/usr/bin/env python3, etc.)
   - Script-related keywords

2. **Extracts the script** from the response

3. **Displays it** in a special card below the AI response

### Example Prompts

Try asking the AI these types of questions:

**Bash Scripts:**
- "Create a bash script to backup files in the current directory"
- "Write a script to find and replace text in all .txt files"
- "Generate a script to check git status and show uncommitted changes"
- "Make a script to install packages using the appropriate package manager"

**Python Scripts:**
- "Create a Python script to parse JSON files"
- "Write a script to download files from a URL"

**Generic:**
- "Generate a script to [your task]"
- "Create a script that [describes what you want]"

## Using Generated Scripts

When a script is detected, you'll see a **"Generated Script"** card with:

### Script Information
- **Language**: The detected script language (bash, python, sh, etc.)
- **Filename**: Suggested filename for the script
- **Confidence**: How confident the system is in the extraction (shown if < 90%)

### Actions

1. **Copy Button** ðŸ“‹
   - Copies the entire script to your clipboard
   - Useful for pasting into terminals, text editors, or saving to files
   - A notification confirms the script was copied

2. **Open in Editor Button** ðŸ’»
   - Currently copies the script to clipboard with a helpful message
   - Paste it into the code editor manually
   - Future versions will automatically open it in the code editor

3. **Dismiss Button** âœ•
   - Removes the script card from view
   - You can still access the script in the chat history

## Script Templates

The system includes templates for common operations:

- **Git Status Check**: Check repository status with error handling
- **File Backup**: Create timestamped backups of files
- **Find and Replace**: Recursively find and replace text in files
- **Package Installation**: Install packages using the appropriate package manager (apt, yum, brew)

These templates are automatically matched when your request matches their description.

## Supported Script Languages

- **bash** - Bash shell scripts
- **sh** - POSIX shell scripts
- **zsh** - Zsh shell scripts
- **fish** - Fish shell scripts
- **python** - Python scripts
- **powershell** - PowerShell scripts

## Best Practices

1. **Be Specific**: The more specific your request, the better the generated script
   - âœ… Good: "Create a bash script to backup all .txt files in /home/user/docs to /backup with timestamp"
   - âŒ Vague: "Make a backup script"

2. **Include Context**: Mention relevant details
   - File paths
   - Specific operations you want
   - Error handling preferences
   - Platform requirements (Linux, macOS, Windows)

3. **Review Before Use**: Always review generated scripts before running them
   - Check for hardcoded paths
   - Verify commands match your system
   - Ensure it won't perform destructive operations

4. **Test Safely**: Test scripts in a safe environment first
   - Use test directories
   - Check file permissions
   - Verify it works as expected

## Terminal Context Integration

When terminal context is enabled, the Script Generator can use information from your active terminal:

- **Current Directory**: Scripts can be contextually aware of your working directory
- **Git Status**: Git-related scripts can use current branch and repository state
- **Environment**: Environment variables from your terminal session

To enable terminal context:
1. Select a terminal from the dropdown in the AI chat tab
2. The script generator will use information from that terminal when generating scripts

## Troubleshooting

**Script not detected?**
- Make sure your prompt includes script-related keywords
- Try being more explicit: "Create a bash script to..."
- Check if the AI response actually contains code blocks

**Script extraction failed?**
- The AI might not have generated a script in the expected format
- Try asking again with different wording
- Check the chat history to see the full AI response

**Copy not working?**
- Check if clipboard access is allowed in your system settings
- Try the "Open in Editor" button as an alternative

## Example Workflow

1. **Ask for a script:**
   ```
   User: "Create a bash script to find all .log files older than 7 days and delete them"
   ```

2. **AI generates response:**
   ```
   Assistant: "Here's a bash script to find and delete old log files:
   
   ```bash
   #!/bin/bash
   find /var/log -name "*.log" -mtime +7 -delete
   ```
   "

3. **Script Generator detects and displays:**
   - Script card appears below the response
   - Shows language: bash
   - Shows filename: script.sh
   - Copy and Open buttons available

4. **Use the script:**
   - Click "Copy" to copy to clipboard
   - Paste into terminal or save to a file
   - Make executable: `chmod +x script.sh`
   - Run: `./script.sh`

## Advanced Usage

### Manual Script Generation (Programmatic)

The Script Generator service can also be used programmatically:

```typescript
// Generate a script from description
const script = await scriptGenerator.generateScript({
    description: "Backup files with timestamp",
    language: "bash",
    includeComments: true,
    includeErrorHandling: true,
    context: terminalContext // Optional: terminal context
})
```

### Custom Script Templates

Script templates can be extended by modifying the `ScriptGeneratorService` to add new templates for common tasks in your workflow.




